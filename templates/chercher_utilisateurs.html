<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <title>Recherche d'utilisateur</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style_homogene.css') }}">
    
  </head>
  <body>
    {% include 'header.html' %}
    <div class="search-container">
      <h1>Recherche d'utilisateur</h1>
      <form method="GET" action="{{ url_for('chercher_utilisateurs') }}">
        <input
          type="text"
          name="q"
          placeholder="Rechercher par nom, prénom, email ou username"
          value="{{ query }}"
        />
        <button type="submit">Rechercher</button>
      </form>

      {% if query and users|length == 0 %}
      <p style="text-align: center; color: #666">
        Aucun utilisateur trouvé pour « {{ query }} ».
      </p>
      {% endif %} {% if users|length > 0 %}
      <table>
        <thead>
          <tr>
            <th>Photo de profil</th>
            <th>Nom d'utilisateur</th>
            <th>Prénom</th>
            <th>Nom</th>
            <th>Courriel</th>
          </tr>
        </thead>
        <tbody>
          {% for user in users %} {% if user.niveau_anonymat is defined and
          user.niveau_anonymat == 'anonyme' %}
          <tr>
            <td colspan="5" style="text-align: center; font-style: italic">
              Cet utilisateur est anonyme.
            </td>
          </tr>
          {% else %}
          <tr
            class="clickable-row"
            tabindex="0"
            role="button"
            onclick="window.location='{{ url_for('profil_utilisateur', username=user.username) }}'"
            onkeypress="handleKeyPress(event, '{{ url_for('profil_utilisateur', username=user.username) }}')"
          >
            <td>
              <img
                src="{{ url_for('static', filename=user.photo_de_profil) }}"
                alt="Photo de profil"
                width="50"
                height="50"
                style="border-radius: 50%"
              />
            </td>
            <td>{{ user.username }}</td>
            <td>{{ user.prenom }}</td>
            <td>{{ user.nom }}</td>
            <td>{{ user.email }}</td>
          </tr>

          {% endif %} {% endfor %}
        </tbody>
      </table>
      {% endif %}
    </div>
  </body>
</html>
